# Методика тестування MCP сервера для Moodle

## Зміст
1. [Підготовка до тестування](#1-підготовка-до-тестування)
2. [Тестування аутентифікації](#2-тестування-аутентифікації)
3. [Тестування загальних інструментів](#3-тестування-загальних-інструментів)
4. [Тестування інструментів для студентів](#4-тестування-інструментів-для-студентів)
5. [Тестування інструментів для викладачів](#5-тестування-інструментів-для-викладачів)
6. [Тестування AI інструментів](#6-тестування-ai-інструментів)
7. [Тестування промптів](#7-тестування-промптів)
8. [Тестування ресурсів](#8-тестування-ресурсів)
9. [Перевірка граничних випадків](#9-перевірка-граничних-випадків)
10. [Документування результатів](#10-документування-результатів)

## 1. Підготовка до тестування

### 1.1. Запуск MCP Inspector

```bash
# Запуск MCP Inspector
npx @modelcontextprotocol/inspector uv --directory /home/docsa/CursorProjects/moodle-ai-assistant run mcp_server/moodle_server.py --base-url http://78.137.2.119:2929
```

Після успішного запуску відкрийте браузер і перейдіть за адресою: http://127.0.0.1:6274

### 1.2. Підготовка тестових облікових записів

Переконайтеся, що у вас є:
- Обліковий запис викладача (логін і пароль)
- Обліковий запис студента (логін і пароль)
- Валідний API токен для Moodle

### 1.3. Підготовка тестових даних

- ID тестових курсів (різні типи курсів)
- ID завдань для тестування
- Місяць і рік для тестування календаря

## 2. Тестування аутентифікації

### 2.1. Аутентифікація через логін та пароль

1. Перейдіть на вкладку "Tools"
2. Знайдіть інструмент "login"
3. Введіть дані для аутентифікації:

```json
{
  "username": "test_teacher",
  "password": "password123"
}
```

Очікуваний результат: повідомлення про успішну аутентифікацію з інформацією про роль.

4. Повторіть з даними студента:

```json
{
  "username": "test_student",
  "password": "password123"
}
```

5. Тестування неправильних даних:

```json
{
  "username": "invalid_user",
  "password": "wrong_password"
}
```

Очікуваний результат: повідомлення про помилку аутентифікації.

### 2.2. Аутентифікація через токен

1. Знайдіть інструмент "set_token"
2. Введіть валідний токен:

```json
{
  "token": "valid_token_here"
}
```

Очікуваний результат: повідомлення про успішну аутентифікацію.

3. Тестування невалідного токена:

```json
{
  "token": "invalid_token_here"
}
```

Очікуваний результат: повідомлення про помилку з невалідним токеном.

### 2.3. Перевірка інформації про користувача

1. Перейдіть на вкладку "Resources"
2. Знайдіть ресурс "user://info"
3. Натисніть на ресурс, щоб отримати інформацію

Очікуваний результат: детальна інформація про аутентифікованого користувача.

## 3. Тестування загальних інструментів

### 3.1. Зміна режиму роботи (для викладача)

1. Аутентифікуйтеся як викладач
2. Знайдіть інструмент "set_mode"
3. Встановіть аналітичний режим:

```json
{
  "mode": "analytical"
}
```

4. Встановіть адміністративний режим:

```json
{
  "mode": "administrative"
}
```

5. Перевірте з невалідним режимом:

```json
{
  "mode": "invalid_mode"
}
```

6. Аутентифікуйтеся як студент і спробуйте змінити режим (очікується помилка)

### 3.2. Отримання списку курсів

1. Знайдіть інструмент "get_user_courses"
2. Викличте інструмент без параметрів

Очікуваний результат: список курсів поточного користувача.

3. Спробуйте викликати без аутентифікації (відключіться і викличте)

### 3.3. Отримання вмісту курсу

1. Знайдіть інструмент "get_course_content"
2. Введіть ID тестового курсу:

```json
{
  "course_id": 123
}
```

3. Перевірте з невалідним ID курсу:

```json
{
  "course_id": 999999
}
```

## 4. Тестування інструментів для студентів

### 4.1. Перевірка статусу завдання

1. Аутентифікуйтеся як студент
2. Знайдіть інструмент "get_assignment_status"
3. Введіть ID завдання:

```json
{
  "assignment_id": 456
}
```

4. Перевірте з невалідним ID завдання:

```json
{
  "assignment_id": 999999
}
```

### 4.2. Отримання подій календаря

1. Знайдіть інструмент "get_calendar_events"
2. Введіть місяць і рік:

```json
{
  "month": 4,
  "year": 2025
}
```

3. Перевірте з невалідними даними:

```json
{
  "month": 13,
  "year": -1
}
```

## 5. Тестування інструментів для викладачів

### 5.1. Тестування в аналітичному режимі

1. Аутентифікуйтеся як викладач
2. Встановіть режим "analytical"
3. Отримання списку студентів:

```json
{
  "course_id": 123
}
```

4. Отримання оцінок курсу:

```json
{
  "course_id": 123
}
```

5. Отримання зданих завдань:

```json
{
  "assignment_id": 456
}
```

### 5.2. Тестування в адміністративному режимі

1. Встановіть режим "administrative"
2. Створення оголошення:

```json
{
  "course_id": 123,
  "subject": "Тестове оголошення",
  "message": "Це тестове оголошення створене через MCP Inspector."
}
```

3. Створення розділу курсу:

```json
{
  "course_id": 123,
  "name": "Тестовий розділ",
  "description": "Розділ створений через MCP Inspector"
}
```

4. Спробуйте створити оголошення в аналітичному режимі (очікується помилка)

### 5.3. Тестування з ролі студента

1. Аутентифікуйтеся як студент
2. Спробуйте викликати інструмент "get_course_students" (очікується помилка)
3. Спробуйте викликати інструмент "create_announcement" (очікується помилка)

## 6. Тестування AI інструментів

### 6.1. Ініціалізація LLM провайдера

1. Знайдіть інструмент "initialize_llm_provider"
2. Викличте з параметром:

```json
{
  "provider_name": "claude"
}
```

3. Перевірте з невалідним провайдером:

```json
{
  "provider_name": "invalid_provider"
}
```

### 6.2. Аналіз курсу за допомогою AI

1. Аутентифікуйтеся як викладач
2. Знайдіть інструмент "ai_analyze_course"
3. Введіть ID курсу:

```json
{
  "course_id": 123
}
```

4. Спостерігайте за прогресом і результатами

### 6.3. Генерація оголошення за допомогою AI

1. Знайдіть інструмент "ai_generate_announcement"
2. Введіть параметри:

```json
{
  "course_id": 123,
  "topic": "Початок нового семестру"
}
```

3. Спостерігайте за прогресом і результатами

## 7. Тестування промптів

### 7.1. Аналіз структури курсу

1. Перейдіть на вкладку "Prompts"
2. Знайдіть промпт "analyze_course_structure"
3. Введіть ID курсу:

```json
{
  "course_id": 123
}
```

4. Перегляньте згенерований промпт і оцініть його якість

### 7.2. Аналіз успішності студентів

1. Знайдіть промпт "student_performance_analysis"
2. Введіть ID курсу:

```json
{
  "course_id": 123
}
```

3. Перегляньте згенерований промпт і оцініть його якість

### 7.3. Створення оголошення курсу

1. Знайдіть промпт "create_course_announcement"
2. Введіть параметри:

```json
{
  "course_id": 123,
  "topic": "Нові навчальні матеріали"
}
```

3. Перегляньте згенерований промпт і оцініть його якість

## 8. Тестування ресурсів

### 8.1. Отримання інформації про користувача

1. Перейдіть на вкладку "Resources"
2. Клікніть на ресурс "user://info"
3. Перевірте отриману інформацію

### 8.2. Отримання подій календаря через ресурс

1. Знайдіть шаблон ресурсу "get_calendar_events"
2. Введіть місяць і рік:

```
calendar://4/2025
```

3. Перевірте отримані дані

### 8.3. Отримання завдань курсу через ресурс

1. Знайдіть шаблон ресурсу "get_course_assignments"
2. Введіть ID курсу:

```
course://123/assignments
```

3. Перевірте отримані дані

### 8.4. Отримання вмісту курсу через ресурс

1. Знайдіть шаблон ресурсу "get_course_content_resource"
2. Введіть ID курсу:

```
course://123/content
```

3. Перевірте отримані дані і порівняйте з результатом інструменту "get_course_content"

## 9. Перевірка граничних випадків

### 9.1. Тестування з великими курсами

1. Використайте ID курсу з великою кількістю розділів і активностей:

```json
{
  "course_id": 789
}
```

2. Переконайтеся, що сервер коректно обробляє великий обсяг даних

### 9.2. Тестування з багатьма студентами

1. Використайте ID курсу з великою кількістю студентів:

```json
{
  "course_id": 789
}
```

2. Перевірте швидкість відповіді та коректність даних

### 9.3. Тестування обробки помилок

1. Спробуйте викликати інструменти без аутентифікації
2. Використайте недійсні ID для різних інструментів
3. Спробуйте викликати інструменти викладача з роллю студента

## 10. Документування результатів

### 10.1. Створення таблиці результатів

Використовуйте наступний формат для документування результатів:

| № | Тест | Очікуваний результат | Фактичний результат | Статус |
|---|------|---------------------|---------------------|--------|
| 1 | Аутентифікація з правильними даними | Успішна аутентифікація | | |
| 2 | Аутентифікація з неправильними даними | Повідомлення про помилку | | |
| ... | ... | ... | ... | ... |

### 10.2. Аналіз проблем

Для кожної виявленої проблеми документуйте:
- Опис проблеми
- Кроки відтворення
- Серйозність (критична, висока, середня, низька)
- Можливі рішення

### 10.3. Рекомендації з покращення

Зафіксуйте рекомендації щодо:
- Виправлення виявлених проблем
- Покращення функціональності
- Оптимізації продуктивності
- Додавання нових функцій

## Приклад виконання тесту

### Тестування аутентифікації через логін та пароль

1. Відкрито вкладку "Tools"
2. Знайдено інструмент "login"
3. Введено дані викладача:
```json
{
  "username": "teacher1",
  "password": "Password123"
}
```
4. Результат: "Аутентифікація успішна. Ви увійшли як викладач."
5. Статус: **Пройдено**